<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>BatesHotel - Staff Management</title>
    <link rel="stylesheet" href="/css/Staff.css"/>
    <link rel="stylesheet" href="/css/AdminForms.css"/>
</head>
<body>

<!-- Fixed-width wrapper to lock the layout -->
<div class="page-wrapper admin-page">

    <!-- HEADER -->
    <header class="top-header">
        <div th:replace="fragments/navbar"></div>
    </header>

    <!-- ADMIN HEADER -->
    <section class="admin-header">
        <h1 class="admin-title">STAFF MANAGEMENT</h1>
        <a href="/admin" class="admin-home-link">Back to Admin Home</a>
    </section>

    <!-- ADD NEW STAFF FORM -->
    <section class="admin-form-container">
        <h2 class="section-title">Add New Staff Member</h2>
        <form th:action="@{/staff/admin/add}" method="post" th:object="${newStaff}" class="admin-form">
            <div class="form-row">
                <div class="form-group">
                    <label for="firstName">First Name:</label>
                    <input type="text" id="firstName" th:field="*{firstName}" required />
                </div>
                <div class="form-group">
                    <label for="lastName">Last Name:</label>
                    <input type="text" id="lastName" th:field="*{lastName}" required />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="jobTitle">Job Title:</label>
                    <input type="text" id="jobTitle" th:field="*{jobTitle}" required />
                </div>
                <div class="form-group">
                    <label for="department">Department:</label>
                    <select id="department" th:field="*{department}" required>
                        <option value="Management">Management</option>
                        <option value="FrontDesk">Front Desk</option>
                        <option value="Housekeeping">Housekeeping</option>
                        <option value="Restaurant">Restaurant</option>
                        <option value="Security">Security</option>
                        <option value="Maintenance">Maintenance</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" th:field="*{startDate}" required />
                </div>
                <div class="form-group">
                    <label for="endDate">End Date (optional):</label>
                    <input type="date" id="endDate" th:field="*{endDate}" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="contactEmail">Email:</label>
                    <input type="email" id="contactEmail" th:field="*{contactEmail}" />
                </div>
                <div class="form-group">
                    <label for="contactPhone">Phone:</label>
                    <input type="tel" id="contactPhone" th:field="*{contactPhone}" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group full-width">
                    <label for="imageUrl">Image URL:</label>
                    <input type="text" id="imageUrl" th:field="*{imageUrl}" placeholder="URL to staff member's photo" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group full-width">
                    <label for="description">Description:</label>
                    <textarea id="description" th:field="*{description}" rows="3" placeholder="Brief description about the staff member"></textarea>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary">Add Staff Member</button>
                <button type="reset" class="btn-secondary">Clear Form</button>
            </div>
        </form>
    </section>

    <!-- CURRENT STAFF TABLE -->
    <section class="admin-table-container">
        <h2 class="section-title">Current Staff Members</h2>
        <table class="admin-table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Job Title</th>
                <th>Department</th>
                <th>Start Date</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="staff : ${staffList}">
                <td th:text="${staff.id}">ID</td>
                <td th:text="${staff.firstName + ' ' + staff.lastName}">Name</td>
                <td th:text="${staff.jobTitle}">Job Title</td>
                <td th:text="${staff.department}">Department</td>
                <td th:text="${#dates.format(staff.startDate, 'dd MMM yyyy')}">Start Date</td>
                <td class="action-buttons">
                    <a th:href="@{/staff/admin/edit/{id}(id=${staff.id})}" class="btn-edit">Edit</a>
                    <a th:href="@{/staff/admin/delete/{id}(id=${staff.id})}" class="btn-delete"
                       onclick="return confirm('Are you sure you want to delete this staff member?')">Delete</a>
                </td>
            </tr>
            </tbody>
        </table>

        <div th:if="${#lists.isEmpty(staffList)}" class="no-records-message">
            <p>No staff members found in the database.</p>
        </div>
    </section>

    <!-- FOOTER -->
    <div th:replace="fragments/footer"></div>
</div>
</body>
</html>