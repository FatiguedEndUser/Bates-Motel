<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>BatesHotel - Service Search Results</title>
    <link rel="stylesheet" href="/css/Services.css"/>
    <link rel="stylesheet" href="/css/ServiceSearch.css"/>
</head>
<body>

<!-- Fixed-width wrapper to lock the layout -->
<div class="page-wrapper">

    <!-- HEADER -->
    <header class="top-header">
        <div th:replace="fragments/navbar"></div>
    </header>

    <!-- SECOND ROW: "SEARCH RESULTS" TITLE & SERVICE TYPE LINKS -->
    <section class="services-header">
        <h1 class="services-title">SEARCH RESULTS</h1>
        <div class="service-categories">
            <!-- Clickable links to other service pages -->
            <a th:href="@{/services}">All</a>
            <a th:href="@{/services/category/Dining}">Dining</a>
            <a th:href="@{/services/category/Wellness}">Wellness</a>
            <a th:href="@{/services/category/Transportation}">Transportation</a>
            <a th:href="@{/services/category/Entertainment}">Entertainment</a>
        </div>
    </section>

    <!-- SEARCH SECTION -->
    <section class="search-container">
        <form th:action="@{/services/search}" method="get" class="search-form">
            <div class="form-group">
                <label for="serviceCategory">Category</label>
                <select id="serviceCategory" name="serviceCategory">
                    <option value="All">All Categories</option>
                    <option value="Dining" th:selected="${serviceCategory == 'Dining'}">Dining</option>
                    <option value="Wellness" th:selected="${serviceCategory == 'Wellness'}">Wellness</option>
                    <option value="Transportation" th:selected="${serviceCategory == 'Transportation'}">Transportation</option>
                    <option value="Entertainment" th:selected="${serviceCategory == 'Entertainment'}">Entertainment</option>
                    <option value="Business" th:selected="${serviceCategory == 'Business'}">Business</option>
                    <option value="Other" th:selected="${serviceCategory == 'Other'}">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="maxPrice">Max Price</label>
                <input type="number" id="maxPrice" name="maxPrice" placeholder="Max Price" min="0" th:value="${maxPrice}">
            </div>
            <div class="form-group">
                <label for="keyword">Keyword</label>
                <input type="text" id="keyword" name="keyword" placeholder="Search..." th:value="${keyword}">
            </div>
            <button type="submit" class="search-btn">Search</button>
        </form>
    </section>

    <!-- Search filters summary -->
    <section class="search-summary">
        <h3>Search Filters</h3>
        <div class="filter-tags">
            <span th:if="${serviceCategory}" class="filter-tag" th:text="'Category: ' + ${serviceCategory}"></span>
            <span th:if="${maxPrice}" class="filter-tag" th:text="'Max Price: $' + ${maxPrice}"></span>
            <span th:if="${keyword}" class="filter-tag" th:text="'Keyword: ' + ${keyword}"></span>
            <a th:href="@{/services}" class="clear-filters">Clear All Filters</a>
        </div>
    </section>

    <!-- MIDDLE SECTION: SERVICE CARDS -->
    <section class="services-container">
        <!-- Dynamic Service Cards - Loop through services from backend -->
        <div th:each="service : ${services}" class="service-card">
            <!-- Service Image -->
            <div class="service-image">
                <img th:src="${service.imageUrl ?: '/img/no-image.jpg'}" th:alt="${service.serviceName}">
            </div>
            <!-- Orange info area -->
            <div class="service-info">
                <h2 class="service-title" th:text="${service.serviceName}">Service Name</h2>
                <p class="service-subtitle" th:text="${service.serviceCategory}">Service Category</p>
                <p class="service-description" th:text="${service.description}">Service Description</p>
                <!-- Book Service button -->
                <a class="book-service-btn" th:href="@{/bookings/add-service/{id}(id=${service.serviceId})}">Add to Booking</a>
            </div>
            <!-- White strip at bottom with price -->
            <div class="service-price">
                <span class="price-amount" th:text="'$' + ${service.serviceCharge}">$25</span>
                <span class="price-unit">/Service</span>
            </div>
        </div>

        <!-- If no services are found -->
        <div th:if="${#lists.isEmpty(services)}" class="no-services-message">
            <p>No services match your search criteria. Please try different filters.</p>
        </div>
    </section>

    <!-- FOOTER -->
    <div th:replace="fragments/footer"></div>
</div>

</body>
</html>